<!doctype html>
<html class="no-js" lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<title>Simon Bedford</title>
		<meta name="description" content="">
		<meta name="author" content="Simon Bedford">

		<link rel="stylesheet" href="https://simonb83.github.io/theme/css/foundation.css" />
		<link rel="stylesheet" href="https://simonb83.github.io/theme/css/pygment/monokai.css" />
		<link rel="stylesheet" href="https://simonb83.github.io/theme/css/custom.css" />

		<!-- GOOGLE WEB FONTS -->
		<link href='https://fonts.googleapis.com/css?family=Droid+Sans:400,700|Droid+Sans+Mono|Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="https://simonb83.github.io/theme/css/alt-fonts.css" />

		<link rel="stylesheet" href="https://simonb83.github.io/css/code.css" type="text/css" />

		<script src="https://simonb83.github.io/theme/js/modernizr.js"></script>

		<!-- Feeds -->
		<link href="https://simonb83.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Simon Bedford Atom Feed" />

<script>var _gaq=[['_setAccount','UA-25264611-8'],['_trackPageview']];(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src='//www.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'))</script>

		<!-- mathjax config similar to math.stackexchange -->
		<script type="text/x-mathjax-config">
		MathJax.Hub.Config({
			jax: ["input/TeX", "output/HTML-CSS"],
			tex2jax: {
				inlineMath: [ ['$', '$'] ],
				displayMath: [ ['$$', '$$']],
				processEscapes: true,
				skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
			},
			messageStyle: "none",
			"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
		});
		</script>
		<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
	</head>
	<body>
		<div class="off-canvas-wrap">
			<div class="inner-wrap">
				<!-- mobile top bar to activate nav -->
				<nav class="tab-bar show-for-small">
					<section class="left-small">
						<a class="left-off-canvas-toggle menu-icon" ><span></span></a>
					</section>

					<section class="middle tab-bar-section">
						<h1 class="title">Simon&nbsp;Bedford</h1>
					</section>
				</nav>

				<!-- mobile side bar nav -->
				<aside class="left-off-canvas-menu">
					<ul class="off-canvas-list">
						<li><a href="https://simonb83.github.io">Home</a></li>
						<li><label>Categories</label></li>
							<li ><a href="https://simonb83.github.io/category/books.html">Books</a></li>
							<li ><a href="https://simonb83.github.io/category/coding.html">Coding</a></li>
							<li ><a href="https://simonb83.github.io/category/customer-experience.html">Customer Experience</a></li>
							<li class="active"><a href="https://simonb83.github.io/category/data-science.html">Data Science</a></li>
							<li ><a href="https://simonb83.github.io/category/deep-learning.html">Deep Learning</a></li>
							<li ><a href="https://simonb83.github.io/category/ideas.html">Ideas</a></li>
							<li ><a href="https://simonb83.github.io/category/machine-learning.html">Machine Learning</a></li>
							<li ><a href="https://simonb83.github.io/category/maths.html">Maths</a></li>
							<li ><a href="https://simonb83.github.io/category/other.html">Other</a></li>
							<li ><a href="https://simonb83.github.io/category/tech.html">Tech</a></li>

						<!-- <li><label>Links</label></li>
							<li><a href="http://getpelican.com/">Pelican</a></li>
							<li><a href="http://python.org/">Python.org</a></li>
							<li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
							<li><a href="#">You can modify those links in your config file</a></li>
 -->


						<li><label>Monthly Archives</label></li>
									<li><a href="/posts/2017/09/index.html">September 2017 (2)</a></li>
									<li><a href="/posts/2017/06/index.html">June 2017 (1)</a></li>
									<li><a href="/posts/2017/03/index.html">March 2017 (1)</a></li>
									<li><a href="/posts/2017/02/index.html">February 2017 (1)</a></li>
									<li><a href="/posts/2017/01/index.html">January 2017 (1)</a></li>
									<li><a href="/posts/2016/11/index.html">November 2016 (3)</a></li>
									<li><a href="/posts/2016/10/index.html">October 2016 (4)</a></li>
									<li><a href="/posts/2016/03/index.html">March 2016 (1)</a></li>
									<li><a href="/posts/2016/02/index.html">February 2016 (2)</a></li>
									<li><a href="/posts/2016/01/index.html">January 2016 (1)</a></li>
									<li><a href="/posts/2015/08/index.html">August 2015 (1)</a></li>
									<li><a href="/posts/2015/03/index.html">March 2015 (2)</a></li>
									<li><a href="/posts/2015/02/index.html">February 2015 (6)</a></li>

						<li><label>Social</label></li>
							<li><a href="http://github.com/simonb83">GitHub</a></li>
							<li><a href="https://mx.linkedin.com/in/simonbedford">LinkedIn</a></li>
							<li><a href="http://twitter.com/simonb83">Twitter</a></li>
					</ul>	
				</aside>

				<!-- top bar nav -->
				<nav class="top-bar hide-for-small-only" data-topbar>
					<ul class="title-area">
						<li class="name">
							<h1><a href="https://simonb83.github.io/">Simon Bedford</a></h1>
						</li>
					</ul>

					<section class="top-bar-section">
						<!-- <ul class="left">
								<li ><a href="https://simonb83.github.io/category/books.html">Books</a></li>
								<li ><a href="https://simonb83.github.io/category/coding.html">Coding</a></li>
								<li ><a href="https://simonb83.github.io/category/customer-experience.html">Customer Experience</a></li>
								<li class="active"><a href="https://simonb83.github.io/category/data-science.html">Data Science</a></li>
								<li ><a href="https://simonb83.github.io/category/deep-learning.html">Deep Learning</a></li>
								<li ><a href="https://simonb83.github.io/category/ideas.html">Ideas</a></li>
								<li ><a href="https://simonb83.github.io/category/machine-learning.html">Machine Learning</a></li>
								<li ><a href="https://simonb83.github.io/category/maths.html">Maths</a></li>
								<li ><a href="https://simonb83.github.io/category/other.html">Other</a></li>
								<li ><a href="https://simonb83.github.io/category/tech.html">Tech</a></li>
						</ul> -->
                        <ul class="right">                                                                                                                                           
                                                                                                          
路路路路                                                                                                                                       
                                     <li><a href="https://simonb83.github.io/pages/about.html">About</a></li>                                    
                                                                                                                                          
                                                                                                                                             
                        </ul>  
					</section>
				</nav>

				<!-- Main Page Content and Sidebar -->
				<section class="main-section">
					<div class="row">
						<!-- Main Content -->
						<div class="medium-9 small-12 columns" role="content">
<article>
	<h2>Making a Streetmap in Matplotlib</h2>
	<!-- JavaScripts: https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/cartodb.js, ecobici_map.js -->

<p>There are a lot of options nowadays for making maps programmatically (especially in Javascript) such as Leaflet and CartoDB.</p>
<p>However, there may be times where you want to include a map in a Jupyter notebook, or just create something yourself from scratch.</p>
<p>A solid, fairly easy-to-use option for Python is Matplotlib's Basemap extension.</p>
<p>Below is an example demonstrating how to use Basemap to create a streetmap of Mexico City, overlaid with neighborhood names.</p>
<h4>Getting Setup</h4>
<p>To add detail to the map, it will be good to have <a href="https://en.wikipedia.org/wiki/Shapefile">shapefiles</a> for roads as well as neighborhood (colonia) boundaries and names.</p>
<p>Openstreetmap data for roads can be downloaded from: <a href="http://download.geofabrik.de/osm/north-america/mexico-latest-free.shp.zip">http://download.geofabrik.de/osm/north-america/mexico-latest-free.shp.zip</a></p>
<p>Once you extract the zip file, inside the folder you will find the following files:</p>
<ul>
<li>gis.osm_roads_free_1.cpg</li>
<li>gis.osm_roads_free_1.dbf</li>
<li>gis.osm_roads_free_1.prj</li>
<li>gis.osm_roads_free_1.shp</li>
<li>gis.osm_roads_free_1.shx</li>
</ul>
<p>The neighborhood data comes from <a href="http://shapesdemexico.wixsite.com/shapes/agebs">http://shapesdemexico.wixsite.com/shapes/agebs</a>. Similarly, inside the folder are various files with extensions .dbf, .shf etc.</p>
<p>In both cases, the files we are interested in are those with a .shp extension.</p>
<p>If we want to filter these or integrate them with other data, we can load them into a PostgreSQL database and perform whatever analyses we want there.</p>
<p><strong>Create a database:</strong></p>
<div class="highlight"><pre>createdb mapping
</pre></div>


<p><br />
<strong>Add the PostGIS extension:</strong></p>
<div class="highlight"><pre>psql mapping -c <span class="s1">&#39;CREATE EXTENSION postgis&#39;</span>
</pre></div>


<p><br />
<strong>Load the street and neighborhood data:</strong></p>
<div class="highlight"><pre>shp2pgsql -s <span class="m">4326</span> gis.osm_roads_free_1.shp roads <span class="p">|</span> psql mapping
shp2pgsql -s <span class="m">4326</span> Colonias.shp colonias <span class="p">|</span> psql mapping
</pre></div>


<p><br />
These last two commands will load the roads and colonias shapefiles into tables called <code>roads</code> and <code>colonias</code> respectively in the mapping database.</p>
<p>Once you have performed any analyses you need, you can re-extract relevant shapefiles using the <code>psql2shp</code> command.</p>
<p>For example, we'll extract Primary and Secondary roads, Motorways and Residential streets that fall within a box bounded by latitude / longitude coordinates for central Mexico City:</p>
<div class="highlight"><pre>pgsql2shp -f extracted_roads -h localhost -u USERNAME mapping
<span class="s2">&quot;SELECT osm_id, geom FROM roads</span>
<span class="s2">WHERE fclass IN (&#39;primary&#39;, &#39;secondary&#39;, &#39;motorway&#39;, &#39;residential&#39;)</span>
<span class="s2">AND ST_Within(geom,</span>
<span class="s2">ST_SetSRID(ST_GeomFromText(&#39;POLYGON((-99.22 19.33, -99.22 19.45,</span>
<span class="s2">-99.12 19.45, -99.12 19.33, -99.22 19.33))&#39;), 4326));&quot;</span>
</pre></div>


<p><br />
Similarly, extract the Colonias along with their names within the same bounding box:</p>
<div class="highlight"><pre>pgsql2shp -f extracted_colonias -h localhost -u USERNAME mapping
<span class="s2">&quot;SELECT objectid, sett_name, ST_Force2D(geom) FROM colonias</span>
<span class="s2">WHERE ST_Within(geom,</span>
<span class="s2">ST_SetSRID(ST_GeomFromText(&#39;POLYGON((-99.22 19.33, -99.22 19.45,</span>
<span class="s2">-99.12 19.45, -99.12 19.33, -99.22 19.33))&#39;), 4326));&quot;</span>
</pre></div>


<p><br /></p>
<h4>Creating the map</h4>
<p>In order to actually draw the map, we'll need <code>pyplot</code> (as normal) as well as the <code>Basemap</code> extension:</p>
<div class="highlight"><pre><span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mpl_toolkits.basemap</span> <span class="kn">import</span> <span class="n">Basemap</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</pre></div>


<p><br />
Start by initializing a blank map:</p>
<div class="highlight"><pre><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">15</span><span class="p">))</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">Basemap</span><span class="p">(</span>
    <span class="n">resolution</span> <span class="o">=</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span>
    <span class="n">projection</span> <span class="o">=</span> <span class="s1">&#39;merc&#39;</span><span class="p">,</span>
    <span class="n">llcrnrlon</span><span class="o">=-</span><span class="mf">99.22</span><span class="p">,</span> <span class="n">llcrnrlat</span><span class="o">=</span> <span class="mf">19.33</span><span class="p">,</span> <span class="n">urcrnrlon</span><span class="o">=-</span><span class="mf">99.12</span><span class="p">,</span> <span class="n">urcrnrlat</span><span class="o">=</span><span class="mf">19.45</span><span class="p">)</span>

<span class="n">m</span><span class="o">.</span><span class="n">fillcontinents</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;#f0f0f0&#39;</span><span class="p">)</span>
</pre></div>


<p><br />
The key arguments when initializing the map are:</p>
<div class="highlight"><pre><span class="n">resolution</span><span class="o">=</span><span class="s1">&#39;c&#39;</span>
</pre></div>


<p><br />
This sets the resolution to use for plotting boundaries, for example country borders. In our case we are zoomed-in to a specific city, so this does not really apply.</p>
<div class="highlight"><pre><span class="n">projection</span><span class="o">=</span><span class="s1">&#39;merc&#39;</span>
</pre></div>


<p><br />
The type of projection to use when drawing the map. For this map we are using the <a href="https://en.wikipedia.org/wiki/Mercator_projection">Mercator</a> projection.</p>
<div class="highlight"><pre><span class="n">llcrnrlon</span><span class="o">=-</span><span class="mf">99.22</span><span class="p">,</span> <span class="n">llcrnrlat</span><span class="o">=</span> <span class="mf">19.33</span><span class="p">,</span> <span class="n">urcrnrlon</span><span class="o">=-</span><span class="mf">99.12</span><span class="p">,</span> <span class="n">urcrnrlat</span><span class="o">=</span><span class="mf">19.45</span>
</pre></div>


<p><br />
The region to be mapped, specified by the latitude and longitude of the lower-left and upper-right corners. This can also be specified by coordinates for the center of the map along with the width and height of the map.</p>
<div class="highlight"><pre><span class="n">m</span><span class="o">.</span><span class="n">fillcontinents</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;#f0f0f0&#39;</span><span class="p">)</span>
</pre></div>


<p><br />
Finally, this sets the background color of continents (land) to be light grey.</p>
<p>All of this results in a blank canvas:</p>
<p><img alt="blank_map" src="/images/making_a_map_10_0.png" /></p>
<h4>Adding the Roads</h4>
<p>Noe we can go ahead and draw the roads and streets that we extracted earlier. </p>
<p>Using the same initialization code as above, we can simply add the lines:</p>
<div class="highlight"><pre><span class="n">m</span><span class="o">.</span><span class="n">readshapefile</span><span class="p">(</span><span class="s1">&#39;extracted_roads&#39;</span><span class="p">,</span> <span class="s1">&#39;roads&#39;</span><span class="p">,</span> <span class="n">drawbounds</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">)</span>
</pre></div>


<p><br />
This loads the .shp file created by the <code>psql2shp</code> command, and then </p>
<div class="highlight"><pre><span class="n">drawbounds</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span>
</pre></div>


<p><br />
tells Basemap that we wish to draw the shapes included in the file on the map canvas using a grey line.</p>
<p><img alt="blank_map" src="/images/mapping_making_a_map_11_0.png" /></p>
<h4>Adding Neighborhood Names</h4>
<p>Before we can add the neighborhood names, we need to define a function for finding the center of a shape (defined by an array or coordinates):</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">centeroidnp</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
    <span class="n">length</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">sum_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">arr</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="n">sum_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">arr</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">sum_x</span><span class="o">/</span><span class="n">length</span><span class="p">,</span> <span class="n">sum_y</span><span class="o">/</span><span class="n">length</span>
</pre></div>


<p><br />
Now we can add the colonias shapefile to the map:</p>
<div class="highlight"><pre><span class="n">m</span><span class="o">.</span><span class="n">readshapefile</span><span class="p">(</span><span class="s1">&#39;extracted_colonias&#39;</span><span class="p">,</span> <span class="s1">&#39;colonias&#39;</span><span class="p">,</span> <span class="n">drawbounds</span> <span class="o">=</span> <span class="bp">False</span><span class="p">)</span>
</pre></div>


<p><br />
In this case we set <code>drawbounds=False</code> to specify that we don't want Basemap to add the shapes automatically.</p>
<p>If we were to plot all of the colonia names on the map, it will be too crowded, so let's just use a few specific names:</p>
<div class="highlight"><pre><span class="n">names_of_interest</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;DEL VALLE&#39;</span><span class="p">,</span> <span class="s1">&#39;POLANCO REFORMA&#39;</span><span class="p">,</span> <span class="s1">&#39;COYOACAN CENTRO&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;CENTRO&#39;</span><span class="p">,</span> <span class="s1">&#39;ROMA NORTE&#39;</span><span class="p">,</span> <span class="s1">&#39;ROMA SUR&#39;</span><span class="p">,</span> <span class="s1">&#39;TACUBAYA&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;DEL VALLE SUR&#39;</span><span class="p">]</span>
</pre></div>


<p><br />
Finally add these names to the map, plotting them in the center of their respective neighborhoods:</p>
<div class="highlight"><pre><span class="n">colonia_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;SETT_NAME&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">colonias_info</span><span class="p">]</span>

<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">shape</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">colonia_names</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">colonias</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names_of_interest</span><span class="p">:</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">centeroidnp</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">shape</span><span class="p">))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#252525&#39;</span><span class="p">)</span>
</pre></div>


<p><br />
<img alt="blank_map" src="/images/mapping_making_a_map_13_0.png" /></p>
<h4>Zoom-In</h4>
<p>We can zoom-in on a particular part of the city by adjusting the latitude and longitude of the bounding box:</p>
<div class="highlight"><pre><span class="n">m</span> <span class="o">=</span> <span class="n">Basemap</span><span class="p">(</span>
    <span class="n">resolution</span> <span class="o">=</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span>
    <span class="n">llcrnrlon</span><span class="o">=-</span><span class="mf">99.195</span><span class="p">,</span> <span class="n">llcrnrlat</span><span class="o">=</span> <span class="mf">19.37</span><span class="p">,</span> <span class="n">urcrnrlon</span><span class="o">=-</span><span class="mf">99.145</span><span class="p">,</span> <span class="n">urcrnrlat</span><span class="o">=</span><span class="mf">19.41</span><span class="p">)</span>
</pre></div>


<p><br />
Let's include smaller roads, and this time we'll also extract the road type <code>fclass</code>:</p>
<div class="highlight"><pre>pgsql2shp -f extracted_roads -h localhost -u simonbedford mapping
<span class="s2">&quot;SELECT osm_id, ST_MakeLine(geom), fclass FROM roads</span>
<span class="s2">WHERE ST_Within(geom,</span>
<span class="s2">ST_SetSRID(ST_GeomFromText(&#39;POLYGON((-99.195 19.37, -99.195 19.41,</span>
<span class="s2">-99.145 19.41, -99.145 19.37, -99.195 19.37))&#39;), 4326));&quot;</span>
</pre></div>


<p><br />
<img alt="blank_map" src="/images/mapping_making_a_map_14_0.png" /></p>
<h4>Change the Colors</h4>
<p>Give the plot a dark background:</p>
<div class="highlight"><pre><span class="n">m</span><span class="o">.</span><span class="n">fillcontinents</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;#252525&#39;</span><span class="p">)</span>
</pre></div>


<p><br />
We'll also color the roads according to their type:</p>
<ul>
<li>A thick red line for primary &amp; secondary roads and motorways</li>
<li>A thin blue line for other roads</li>
</ul>
<p>Define a custom function for obtaining the line color and width:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">line_styling</span><span class="p">(</span><span class="n">road_type</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">road_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;primary&#39;</span><span class="p">,</span> <span class="s1">&#39;motorway&#39;</span><span class="p">,</span> <span class="s1">&#39;trunk&#39;</span><span class="p">,</span> <span class="s1">&#39;secondary&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;#F11810&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;#2167AB&#39;</span>
</pre></div>


<p><br />
Import the shapefile but don't automatically draw the roads:</p>
<div class="highlight"><pre><span class="n">m</span><span class="o">.</span><span class="n">readshapefile</span><span class="p">(</span><span class="s1">&#39;extracted_roads&#39;</span><span class="p">,</span> <span class="s1">&#39;roads&#39;</span><span class="p">,</span> <span class="n">drawbounds</span> <span class="o">=</span> <span class="bp">False</span><span class="p">)</span>
</pre></div>


<p><br />
Instead, loop through each road and add it to the map with its format based on the type of road:</p>
<div class="highlight"><pre><span class="n">road_types</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;FCLASS&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">roads_info</span><span class="p">]</span>

<span class="k">for</span> <span class="n">shape</span><span class="p">,</span> <span class="n">road_type</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">roads</span><span class="p">,</span> <span class="n">road_types</span><span class="p">):</span>
    <span class="n">lw</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">line_styling</span><span class="p">(</span><span class="n">road_type</span><span class="p">)</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">shape</span><span class="p">)</span> 
    <span class="n">m</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="n">lw</span><span class="p">)</span>
</pre></div>


<p><br />
Change the color of the neighborhood names from black to white:</p>
<div class="highlight"><pre><span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
        <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
</pre></div>


<p><br />
<img alt="blank_map" src="/images/mapping_making_a_map_16_0.png" /></p>
	<hr/>
	<h6>Written by <a href="https://simonb83.github.io/author/simon-bedford.html">Simon Bedford</a> in <a href="https://simonb83.github.io/category/data-science.html">Data Science</a> on Sun 05 March 2017. Tags: <a href="https://simonb83.github.io/tag/data-science.html">data-science</a>, <a href="https://simonb83.github.io/tag/visualization.html">visualization</a>, <a href="https://simonb83.github.io/tag/python.html">python</a>, <a href="https://simonb83.github.io/tag/matplotlib.html">matplotlib</a>, </h6>
</article>

<hr/>
						</div>
						<!-- End Main Content -->
						<!-- Sidebar -->
						<aside class="medium-3 hide-for-small-only columns">
							<!-- <div class="panel">
								<h5>Links</h5>
								<ul class="side-nav">
									<li><a href="http://getpelican.com/">Pelican</a></li>
									<li><a href="http://python.org/">Python.org</a></li>
									<li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
									<li><a href="#">You can modify those links in your config file</a></li>
								</ul>
							</div> -->

							<div class="panel">
								<h5>Categories</h5>
								<ul class="side-nav">
										<li><a href="category/books.html">Books</a></li>
										<li><a href="category/coding.html">Coding</a></li>
										<li><a href="category/customer-experience.html">Customer Experience</a></li>
										<li><a href="category/data-science.html">Data Science</a></li>
										<li><a href="category/deep-learning.html">Deep Learning</a></li>
										<li><a href="category/ideas.html">Ideas</a></li>
										<li><a href="category/machine-learning.html">Machine Learning</a></li>
										<li><a href="category/maths.html">Maths</a></li>
										<li><a href="category/other.html">Other</a></li>
										<li><a href="category/tech.html">Tech</a></li>
								</ul>
							</div>

							<div class="panel">
								<h5>Tags</h5>
								<ul class="tag-cloud">
									<li><a href="/tag/science.html" class="tag-4">science</a></li>
									<li><a href="/tag/visualization.html" class="tag-1">visualization</a></li>
									<li><a href="/tag/maths.html" class="tag-2">maths</a></li>
									<li><a href="/tag/politics.html" class="tag-4">politics</a></li>
									<li><a href="/tag/payments.html" class="tag-4">payments</a></li>
									<li><a href="/tag/neural-network.html" class="tag-3">neural-network</a></li>
									<li><a href="/tag/coding.html" class="tag-3">coding</a></li>
									<li><a href="/tag/machine-learning.html" class="tag-1">machine-learning</a></li>
									<li><a href="/tag/books.html" class="tag-4">books</a></li>
									<li><a href="/tag/information-theory.html" class="tag-4">information-theory</a></li>
									<li><a href="/tag/networks.html" class="tag-4">networks</a></li>
									<li><a href="/tag/ai.html" class="tag-4">ai</a></li>
									<li><a href="/tag/matplotlib.html" class="tag-4">matplotlib</a></li>
									<li><a href="/tag/10ideas.html" class="tag-2">10ideas</a></li>
									<li><a href="/tag/bitcoin.html" class="tag-4">bitcoin</a></li>
									<li><a href="/tag/python.html" class="tag-1">python</a></li>
									<li><a href="/tag/deep-learning.html" class="tag-2">deep-learning</a></li>
									<li><a href="/tag/customer-experience.html" class="tag-2">customer-experience</a></li>
									<li><a href="/tag/cooking.html" class="tag-4">cooking</a></li>
									<li><a href="/tag/uncertainty.html" class="tag-4">uncertainty</a></li>
									<li><a href="/tag/crypto-currencies.html" class="tag-4">crypto-currencies</a></li>
									<li><a href="/tag/data-science.html" class="tag-1">data-science</a></li>
									<li><a href="/tag/exploratory-analysis.html" class="tag-4">exploratory-analysis</a></li>
								</ul>
							</div>

							<div class="panel">
								<h5>Monthly Archives</h5>
								<ul class="side-nav">
											<li><a href="/posts/2017/09/index.html">September 2017 (2)</a></li>
											<li><a href="/posts/2017/06/index.html">June 2017 (1)</a></li>
											<li><a href="/posts/2017/03/index.html">March 2017 (1)</a></li>
											<li><a href="/posts/2017/02/index.html">February 2017 (1)</a></li>
											<li><a href="/posts/2017/01/index.html">January 2017 (1)</a></li>
											<li><a href="/posts/2016/11/index.html">November 2016 (3)</a></li>
											<li><a href="/posts/2016/10/index.html">October 2016 (4)</a></li>
											<li><a href="/posts/2016/03/index.html">March 2016 (1)</a></li>
											<li><a href="/posts/2016/02/index.html">February 2016 (2)</a></li>
											<li><a href="/posts/2016/01/index.html">January 2016 (1)</a></li>
											<li><a href="/posts/2015/08/index.html">August 2015 (1)</a></li>
											<li><a href="/posts/2015/03/index.html">March 2015 (2)</a></li>
											<li><a href="/posts/2015/02/index.html">February 2015 (6)</a></li>
								</ul>
							</div>

							<div class="panel">
								<h5>Social</h5>
								<ul class="side-nav">
									<li><a href="http://github.com/simonb83">GitHub</a></li>
									<li><a href="https://mx.linkedin.com/in/simonbedford">LinkedIn</a></li>
									<li><a href="http://twitter.com/simonb83">Twitter</a></li>
								</ul>
							</div>
						</aside>
						<!-- End Sidebar -->
					</div>

					<!-- Footer -->
					<footer class="row">
						<div class="medium-9 small-12">
							<hr/>
							<p class="text-center">Powered by <a href="http://getpelican.com">Pelican</a> and <a href="http://foundation.zurb.com/">Zurb Foundation</a>. Theme by <a href="http://hamaluik.com">Kenton Hamaluik</a>.</p>
						</div>
					</footer>
					<!-- End Footer -->
				</section>
				<a class="exit-off-canvas"></a>
			</div><!--off-canvas inner-->
		</div><!--off-canvas wrap-->

		<script src="https://simonb83.github.io/theme/js/jquery.js"></script>
		<script src="https://simonb83.github.io/theme/js/foundation.min.js"></script>
		<script>
			$(document).foundation();
		</script>

	</body>
</html>